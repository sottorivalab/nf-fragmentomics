nextflow_process {

    name "Test Process PEAK_STATS"
    script "modules/local/peakStats/main.nf"
    process "PEAK_STATS"

    // TODO move test file in test_data
    test("Should run PEAK_STATS with default parameters") {

        when {
            params {
                outdir = "tests/results"
            }
            process {
                """
                input[0] = [
                    [caseid: 'case1', sampleid: 'sample1'],
                    [source: 'source1', name: 'target1'],
                    file("$baseDir/tests/input/matrix/CDX2_regions_matrix.gz")
                ]
                """
            }
        }

        then {
            assert process.success
        }

    }
}
