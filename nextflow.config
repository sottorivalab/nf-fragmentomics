conda.enabled = true

executor {
	queueSize = 200
	submitRateLimit = '1sec'
}

params {
	outdir           = "./results"
	genome_2bit      = "/scratch/davide.rambaldi/nf-fragmentomics_sandbox/references/GRCh38.2bit"
	genome_size      = 2913022398
	chr_sizes        = "/scratch/davide.rambaldi/nf-fragmentomics_sandbox/references/GRCh38.sizes"
	blacklist_bed    = '/scratch/davide.rambaldi/nf-fragmentomics_sandbox/references/ENCODE_Blacklist_V2.bed'
	bin_size         = 2
	target_expand_sx = 4000
	target_expand_dx = 4000
}

profiles {
	hpc {
		
		errorStrategy = {task.exitStatus in [104,134,137,139,143,255] ? 'retry' : 'finish' }
		maxErrors = '-1'
		maxRetries = 5
		scratch = "\$TMPDIR"

		process {
			withLabel: 'local_executor' {
				executor = "local"
			}

			withLabel: 'hpc_executor' {
				executor = 'slurm'
				queue = 'cpuq'
			}
		}
	}
}
